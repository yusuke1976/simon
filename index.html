<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>指紋認証シミュレーター</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        button { margin: 10px; padding: 5px 10px; }
        #fingerprintImage { width: 100px; height: 100px; margin: 20px auto; background-color: #ddd; }
    </style>
</head>
<body>
    <h1>指紋認証シミュレーター</h1>
    <div id="fingerprintImage"></div>
    <button id="registerButton">ユーザー登録</button>
    <button id="authenticateButton">認証</button>
    <p id="message"></p>

    <script>
        class FingerprintAuth {
            constructor() {
                this.users = new Map();
            }

            generateFingerprint() {
                return Math.floor(Math.random() * 1000000);
            }

            registerUser(username) {
                const fingerprintId = this.generateFingerprint();
                this.users.set(fingerprintId, username);
                return fingerprintId;
            }

            authenticateUser(fingerprintId) {
                return this.users.has(fingerprintId);
            }
        }

        const auth = new FingerprintAuth();
        const messageElement = document.getElementById('message');
        const fingerprintImage = document.getElementById('fingerprintImage');

        document.getElementById('registerButton').addEventListener('click', () => {
            const username = prompt('ユーザー名を入力してください：');
            if (username) {
                const fingerprintId = auth.registerUser(username);
                messageElement.textContent = `ユーザー ${username} を指紋ID ${fingerprintId} で登録しました。`;
                fingerprintImage.style.backgroundColor = `#${fingerprintId.toString(16).padStart(6, '0')}`;
            }
        });

        document.getElementById('authenticateButton').addEventListener('click', () => {
            const fingerprintId = auth.generateFingerprint();
            fingerprintImage.style.backgroundColor = `#${fingerprintId.toString(16).padStart(6, '0')}`;
            
            if (auth.authenticateUser(fingerprintId)) {
                const username = auth.users.get(fingerprintId);
                messageElement.textContent = `認証成功！ようこそ、${username}さん。`;
            } else {
                messageElement.textContent = '認証失敗。指紋が認識されませんでした。';
            }
        });
    </script>
</body>
</html>